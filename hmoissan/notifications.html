<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notificaciones - H.Moissan</title>
    <!-- Added Font Awesome CDN for modern icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #f5f5f5;">

<mobile-view>
    <div>
        <!-- Header -->
        <div style="background-color: #0d5d56; padding: 15px; color: white;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div style="display: flex; align-items: center;">
                    <i class="fas fa-arrow-left" onclick="goBack()" style="font-size: 18px; cursor: pointer; margin-right: 15px;"></i>
                    <h2 style="margin: 0; font-size: 20px; font-weight: 600;">Notificaciones</h2>
                </div>
                <div style="display: flex; align-items: center; gap: 15px;">
                    <i class="fas fa-check-double" onclick="markAllRead()" style="font-size: 16px; cursor: pointer;" title="Marcar todas como leídas"></i>
                    <i class="fas fa-cog" onclick="goToSettings()" style="font-size: 16px; cursor: pointer;" title="Configuración"></i>
                </div>
            </div>
        </div>

        <!-- Filtros de Notificaciones -->
        <div style="padding: 15px; background: white; border-bottom: 1px solid #e9ecef;">
            <div style="display: flex; gap: 8px; overflow-x: auto;">
                <button onclick="filterNotifications('all')" id="filter-all" class="filter-btn active" style="padding: 6px 12px; border: 1px solid #0d5d56; background: #0d5d56; color: white; border-radius: 16px; font-size: 12px; white-space: nowrap; cursor: pointer;">Todas</button>
                <button onclick="filterNotifications('orders')" id="filter-orders" class="filter-btn" style="padding: 6px 12px; border: 1px solid #0d5d56; background: white; color: #0d5d56; border-radius: 16px; font-size: 12px; white-space: nowrap; cursor: pointer;">Pedidos</button>
                <button onclick="filterNotifications('promotions')" id="filter-promotions" class="filter-btn" style="padding: 6px 12px; border: 1px solid #0d5d56; background: white; color: #0d5d56; border-radius: 16px; font-size: 12px; white-space: nowrap; cursor: pointer;">Promociones</button>
                <button onclick="filterNotifications('recommendations')" id="filter-recommendations" class="filter-btn" style="padding: 6px 12px; border: 1px solid #0d5d56; background: white; color: #0d5d56; border-radius: 16px; font-size: 12px; white-space: nowrap; cursor: pointer;">Recomendaciones</button>
            </div>
        </div>

        <!-- Lista de Notificaciones -->
        <div id="notificationsList" style="padding: 15px; background: #f8f9fa;">
            <!-- Notificaciones de Pedidos -->
            <div class="notification-item" data-category="orders" data-read="false" onclick="markAsRead(this); goToOrders();" style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 12px; border-left: 4px solid #0d5d56; cursor: pointer; position: relative;">
                <div style="display: flex; align-items: flex-start;">
                    <div style="background: #e8f5e8; padding: 8px; border-radius: 50%; margin-right: 12px;">
                        <i class="fas fa-truck" style="color: #28a745; font-size: 16px;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #333; margin-bottom: 4px;">Pedido en camino</div>
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px;">Tu pedido #HM-2024-001 está siendo enviado</div>
                        <div style="font-size: 11px; color: #999;">Hace 2 horas</div>
                    </div>
                    <div class="unread-indicator" style="width: 8px; height: 8px; background: #0d5d56; border-radius: 50%; margin-top: 4px;"></div>
                </div>
            </div>

            <div class="notification-item" data-category="promotions" data-read="false" onclick="markAsRead(this); goToCategories('engagement-rings');" style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 12px; border-left: 4px solid #ff6b6b; cursor: pointer; position: relative;">
                <div style="display: flex; align-items: flex-start;">
                    <div style="background: #ffe6e6; padding: 8px; border-radius: 50%; margin-right: 12px;">
                        <i class="fas fa-percentage" style="color: #ff6b6b; font-size: 16px;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #333; margin-bottom: 4px;">¡Oferta especial para ti!</div>
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px;">20% OFF en anillos de compromiso hasta mañana</div>
                        <div style="font-size: 11px; color: #999;">Hace 5 horas</div>
                    </div>
                    <div class="unread-indicator" style="width: 8px; height: 8px; background: #ff6b6b; border-radius: 50%; margin-top: 4px;"></div>
                </div>
            </div>

            <div class="notification-item" data-category="recommendations" data-read="true" onclick="goToProductDetail('emerald-necklace');" style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 12px; border-left: 4px solid #ffd700; cursor: pointer; opacity: 0.8;">
                <div style="display: flex; align-items: flex-start;">
                    <div style="background: #fff8e1; padding: 8px; border-radius: 50%; margin-right: 12px;">
                        <i class="fas fa-star" style="color: #ffd700; font-size: 16px;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #333; margin-bottom: 4px;">Te puede interesar</div>
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px;">Collar de Esmeraldas - Basado en tus favoritos</div>
                        <div style="font-size: 11px; color: #999;">Ayer</div>
                    </div>
                </div>
            </div>

            <div class="notification-item" data-category="orders" data-read="true" onclick="goToOrders();" style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 12px; border-left: 4px solid #28a745; cursor: pointer; opacity: 0.8;">
                <div style="display: flex; align-items: flex-start;">
                    <div style="background: #e8f5e8; padding: 8px; border-radius: 50%; margin-right: 12px;">
                        <i class="fas fa-check-circle" style="color: #28a745; font-size: 16px;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #333; margin-bottom: 4px;">Pedido entregado</div>
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px;">Tu pedido #HM-2024-002 fue entregado exitosamente</div>
                        <div style="font-size: 11px; color: #999;">Hace 2 días</div>
                    </div>
                </div>
            </div>

            <div class="notification-item" data-category="promotions" data-read="true" onclick="goToCategories('high-jewelry');" style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 12px; border-left: 4px solid #9c27b0; cursor: pointer; opacity: 0.8;">
                <div style="display: flex; align-items: flex-start;">
                    <div style="background: #f3e5f5; padding: 8px; border-radius: 50%; margin-right: 12px;">
                        <i class="fas fa-gem" style="color: #9c27b0; font-size: 16px;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #333; margin-bottom: 4px;">Nueva colección disponible</div>
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px;">Descubre nuestra nueva línea de Alta Joyería</div>
                        <div style="font-size: 11px; color: #999;">Hace 3 días</div>
                    </div>
                </div>
            </div>

            <div class="notification-item" data-category="recommendations" data-read="true" onclick="goToWishlist();" style="background: white; padding: 15px; border-radius: 10px; margin-bottom: 12px; border-left: 4px solid #ff4444; cursor: pointer; opacity: 0.8;">
                <div style="display: flex; align-items: flex-start;">
                    <div style="background: #ffe6e6; padding: 8px; border-radius: 50%; margin-right: 12px;">
                        <i class="fas fa-heart" style="color: #ff4444; font-size: 16px;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; font-size: 14px; color: #333; margin-bottom: 4px;">Productos en oferta</div>
                        <div style="font-size: 13px; color: #666; margin-bottom: 6px;">Algunos de tus favoritos tienen descuento</div>
                        <div style="font-size: 11px; color: #999;">Hace 1 semana</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Estado vacío (oculto por defecto) -->
        <div id="emptyState" style="display: none; text-align: center; padding: 60px 20px;">
            <i class="fas fa-bell-slash" style="font-size: 48px; color: #ccc; margin-bottom: 20px;"></i>
            <h3 style="color: #666; font-size: 18px; margin-bottom: 10px;">No hay notificaciones</h3>
            <p style="color: #999; font-size: 14px;">Te notificaremos sobre pedidos, ofertas y novedades</p>
        </div>
    </div>
</mobile-view>

<script>
     class MobileView extends HTMLElement {
      constructor() {
        super();
        const shadow = this.attachShadow({ mode: 'open' });
    
        // Add Font Awesome CDN to shadow DOM
        const fontAwesomeLink = document.createElement('link');
        fontAwesomeLink.setAttribute('rel', 'stylesheet');
        fontAwesomeLink.setAttribute('href', 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css');
        shadow.appendChild(fontAwesomeLink);
    
        // Contenedor principal
        const wrapper = document.createElement('div');
        wrapper.id = 'mobileFrameCtn';
        wrapper.innerHTML = `
          <div id="mobileFrameEl">
            <!-- Status Bar -->
            <div id="statusBarEl">
              <span>9:41</span>
              <div style="display: flex; gap: 6px;">
                <i class="fas fa-signal"></i>
                <i class="fas fa-battery-three-quarters"></i>
              </div>
            </div>
            
            <!-- App Content Area -->
            <div id="screenContentEl">
              <slot></slot>
            </div>
            
            <!-- Bottom Navigation Bar -->
            <div id="navBarEl">
              <div class="nav-item active">
                <i class="fas fa-home"></i>
                <span>Home</span>
              </div>
              <div class="nav-item" onclick="goToCart()" style="position: relative;">
                <i class="fas fa-shopping-cart"></i>
                <span>Carrito</span>
                <span id="cartBadge" style="position: absolute; top: 5px; right: 8px; background: #ff4444; color: white; border-radius: 50%; width: 18px; height: 18px; font-size: 10px; display: flex; align-items: center; justify-content: center; font-weight: 600;">2</span>
              </div>
              <div class="nav-item" onclick="goToProfile()">
                <i class="fas fa-user"></i>
                <span>Perfil</span>
              </div>
            </div>
          </div>
        `;
    
        // Estilos internos
        const style = document.createElement('style');
        style.textContent = `
          #mobileFrameCtn {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #f5f5f5;
          }
          #mobileFrameEl {
            width: 375px;
            height: 667px;
            border-radius: 36px;
            overflow: hidden;
            box-shadow: 0 0 0 14px #1a1a1a, 0 0 0 16px #2a2a2a, 0 20px 40px rgba(0,0,0,0.3);
            position: relative;
            display: flex;
            flex-direction: column;
          }
          #statusBarEl {
            height: 44px;
            background: #000;
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            font-size: 14px;
          }
          #screenContentEl {
            flex: 1;
            overflow-y: auto;
            background: #fff;
            padding-bottom: 60px;
          }
          #navBarEl {
            height: 60px;
            background: #fff;
            color: #333;
            display: flex;
            justify-content: space-around;
            align-items: center;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            border-top: 1px solid #ddd;
            z-index: 1;
          }
          .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 5px 10px;
            cursor: pointer;
          }
          .nav-item i {
            font-size: 20px;
            margin-bottom: 4px;
          }
          .nav-item span {
            font-size: 12px;
          }
          @media (max-width: 420px) {
            #mobileFrameEl {
              width: 100%;
              max-width: 375px;
              height: 100vh;
              max-height: 667px;
              border-radius: 0;
            }
          }
        `;
    
        shadow.appendChild(style);
        shadow.appendChild(wrapper);
      }
    }
    
    customElements.define('mobile-view', MobileView);

    // Filtrar notificaciones
    function filterNotifications(category) {
        const notifications = document.querySelectorAll('.notification-item');
        const filterBtns = document.querySelectorAll('.filter-btn');
        
        // Update filter buttons
        filterBtns.forEach(btn => {
            btn.style.background = 'white';
            btn.style.color = '#0d5d56';
        });
        document.getElementById(`filter-${category}`).style.background = '#0d5d56';
        document.getElementById(`filter-${category}`).style.color = 'white';
        
        // Filter notifications
        let visibleCount = 0;
        notifications.forEach(notification => {
            if (category === 'all' || notification.dataset.category === category) {
                notification.style.display = 'block';
                visibleCount++;
            } else {
                notification.style.display = 'none';
            }
        });
        
        // Show empty state if no notifications
        document.getElementById('emptyState').style.display = visibleCount === 0 ? 'block' : 'none';
    }

    // Marcar notificación como leída
    function markAsRead(element) {
        element.dataset.read = 'true';
        element.style.opacity = '0.8';
        const indicator = element.querySelector('.unread-indicator');
        if (indicator) {
            indicator.style.display = 'none';
        }
        updateNotificationBadge();
    }

    // Marcar todas como leídas
    function markAllRead() {
        const notifications = document.querySelectorAll('.notification-item[data-read="false"]');
        notifications.forEach(notification => {
            markAsRead(notification);
        });
        alert('Todas las notificaciones marcadas como leídas');
    }

    // Actualizar badge de notificaciones
    function updateNotificationBadge() {
        const unreadCount = document.querySelectorAll('.notification-item[data-read="false"]').length;
        // Esta función se puede usar para actualizar badges en otras páginas
        localStorage.setItem('unreadNotifications', unreadCount);
    }

    // Navigation functions
    function goBack() {
        window.history.back();
    }

    function goToHome() {
        window.location.href = './index.html';
    }

    function goToCart() {
        window.location.href = './cart.html';
    }

    function goToCategories(category = '') {
        if (category) {
            window.location.href = `./categories.html?category=${category}`;
        } else {
            window.location.href = './categories.html';
        }
    }

    function goToProfile() {
        window.location.href = './profile.html';
    }

    function goToProductDetail(productId) {
        window.location.href = `./product-detail.html?id=${productId}`;
    }

    function goToOrders() {
        window.location.href = './orders.html';
    }

    function goToWishlist() {
        window.location.href = './wishlist.html';
    }

    function goToSettings() {
        alert('Configuración de notificaciones - Funcionalidad próximamente');
    }

    // Detect if viewing on mobile device
    function isMobileDevice() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth <= 768;
    }

    // Initialize
    window.addEventListener('DOMContentLoaded', function() {
        updateNotificationBadge();
        
        // If on mobile device, hide mobile-view frame and show full screen
        if (isMobileDevice()) {
            const mobileView = document.querySelector('mobile-view');
            if (mobileView) {
                mobileView.style.cssText = `
                    display: block;
                    width: 100vw;
                    height: 100vh;
                    margin: 0;
                    border-radius: 0;
                    box-shadow: none;
                    background: white;
                `;
                
                // Override shadow DOM styles for mobile
                const shadowRoot = mobileView.shadowRoot;
                if (shadowRoot) {
                    const style = shadowRoot.querySelector('style');
                    if (style) {
                        style.textContent += `
                            #mobileFrameEl {
                                width: 100vw !important;
                                height: 100vh !important;
                                border-radius: 0 !important;
                                box-shadow: none !important;
                            }
                        `;
                    }
                }
            }
            
            // Also hide body margins on mobile
            document.body.style.margin = '0';
            document.body.style.padding = '0';
            document.body.style.overflow = 'hidden';
        }
    });
</script>

</body>
</html>
