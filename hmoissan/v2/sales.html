<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Meta tags para experiencia mÃ³vil completa -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0e2923">
    
    <title>Sales - Hmoissan</title>
    
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts for elegant typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Importar componentes -->
    <script src="components/hmoissan-layout.js"></script>
    <script src="components/search-bar.js"></script>
    <script src="components/cart-button.js"></script>
    <script src="components/search-modal.js"></script>
    <script src="components/cart-modal.js"></script>
    <script src="components/hero-section.js"></script>
    <script src="components/product-card.js"></script>
    <script src="components/product-gallery.js"></script>
    <script src="components/promo-card.js"></script>
    <script src="components/promo-gallery.js"></script>
    <script src="components/category-detail-view.js"></script>
    <script src="components/product-detail-modal.js"></script>
    <script src="components/checkout-view.js"></script>
    <script src="components/order-confirmation-view.js"></script>

</head>
<body>
    <hmoissan-layout 
        right-component="<cart-button item-count='0' show-badge id='header-cart'></cart-button>"
        left-component="<div style='display: flex; align-items: center; width: 100%; justify-content: center; margin-right: -39px; position: absolute; left: 0;'><h1 style='margin: 0; font-family: Dancing Script, Brush Script MT, cursive; font-weight: 600; font-size: 28px; letter-spacing: 1px; text-shadow: 0 1px 2px rgba(0,0,0,0.1);'>H. Moissant</h1></div>"
    >
        
        <!-- Special Promotions Section -->
        <promo-gallery title="Limited Time Offers" layout="horizontal">
            <promo-card
                image-url="https://images.unsplash.com/photo-1617038260897-41a1f14a8ca0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Flash Sale"
                subtitle="Luxury Diamond Collection"
                discount="40%"
                discount-text="FLASH SALE"
                cta-text="Shop Now"
                promo-id="flash-diamonds"
                expires="Dec 31, 2024"
                featured="true">
            </promo-card>
            
            <promo-card
                image-url="https://images.unsplash.com/photo-1599643478518-a784e5dc4c8f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="New Collection"
                subtitle="Emerald & Gold Jewelry"
                discount="25%"
                discount-text="NEW"
                cta-text="Explore"
                promo-id="emerald-collection"
                expires="Limited Stock">
            </promo-card>
            
            <promo-card
                image-url="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Wedding Special"
                subtitle="Engagement Rings & Sets"
                discount="30%"
                discount-text="WEDDING"
                cta-text="View Sets"
                promo-id="wedding-special"
                expires="This Month Only">
            </promo-card>
            
            <promo-card
                image-url="https://images.unsplash.com/photo-1611652022419-a9419f74343d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="VIP Members"
                subtitle="Exclusive Pearl Collection"
                discount="50%"
                discount-text="VIP ONLY"
                cta-text="Join VIP"
                promo-id="vip-pearls"
                expires="Members Only">
            </promo-card>
        </promo-gallery>

        <!-- Best Selling Products Gallery -->
        <product-gallery title="Best Sellers">
            <product-card
                image-url="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Diamond Solitaire"
                subtitle="Classic Engagement Ring"
                price="$2,450"
                product-id="ds-001">
            </product-card>
            
            <product-card
                image-url="https://images.unsplash.com/photo-1605100804763-247f67b3557e?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Emerald Earrings"
                subtitle="Vintage Collection"
                price="$1,890"
                product-id="ee-002">
            </product-card>
            
            <product-card
                image-url="https://images.unsplash.com/photo-1611652022419-a9419f74343d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Pearl Necklace"
                subtitle="Luxury Series"
                price="$3,200"
                product-id="pn-003">
            </product-card>
            
            <product-card
                image-url="https://images.unsplash.com/photo-1506630448388-4e683c67ddb0?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Gold Bracelet"
                subtitle="Artisan Crafted"
                price="$1,650"
                product-id="gb-004">
            </product-card>
            
            <product-card
                image-url="https://images.unsplash.com/photo-1588444837495-c6cfeb53f32d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Sapphire Ring"
                subtitle="Royal Collection"
                price="$2,980"
                product-id="sr-005">
            </product-card>
            
            <product-card
                image-url="https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80"
                title="Tennis Bracelet"
                subtitle="Premium Diamonds"
                price="$4,750"
                product-id="tb-006">
            </product-card>
        </product-gallery>
        
    </hmoissan-layout>
    
    <!-- Modales -->
    <search-modal></search-modal>
    <cart-modal></cart-modal>
    
    <!-- Category Detail View -->
    <category-detail-view id="categoryDetailView"></category-detail-view>
    <product-detail-modal id="productDetailModal"></product-detail-modal>
    <checkout-view id="checkoutView"></checkout-view>
    <order-confirmation-view id="orderConfirmationView"></order-confirmation-view>

    <script>
        // Listen for product clicks from any gallery
        document.addEventListener('gallery-product-clicked', function(event) {
            const { productId } = event.detail;
            if (!productId) return;

            console.log(`Product clicked: ${productId}`);
            
            const modal = document.getElementById('productDetailModal');
            if (modal) {
                modal.setAttribute('product-id', productId);
                modal.setAttribute('visible', 'true');
            }
        });

        // Listen for detail view close
        document.addEventListener('view-closed', function(event) {
            console.log('Detail view closed');
        });

        // Listen for business logic events
        document.addEventListener('search-performed', function(event) {
            const { query, filters } = event.detail;
            console.log('Search performed:', { query, filters });
        });

        document.addEventListener('checkout-requested', function(event) {
            const { items } = event.detail;
            console.log('Checkout requested with items:', items);

            const checkoutView = document.getElementById('checkoutView');
            const cartModal = document.querySelector('cart-modal');

            if (checkoutView) {
                checkoutView.setAttribute('cart-items', JSON.stringify(items));
                checkoutView.setAttribute('visible', 'true');
            }
            
            if (cartModal) {
                cartModal.close();
            }
        });

        // Listen for add-to-cart from product detail modal
        document.addEventListener('add-to-cart', function(event) {
            const product = event.detail;
            console.log('Adding to cart:', product);
            
            const cartModal = document.querySelector('cart-modal');
            if (cartModal) {
                cartModal.addItem(product);
            }
        });

        // Listen for cart updates to change header button
        document.addEventListener('cart-updated', function(event) {
            const { itemCount } = event.detail;
            console.log(`Cart updated, item count: ${itemCount}`);

            const cartButton = document.getElementById('header-cart');
            if (cartButton) {
                cartButton.setAttribute('item-count', itemCount);
            }
        });

        // Listen for successful checkout to show confirmation
        document.addEventListener('checkout-completed', function(event) {
            console.log('Order successful!', event.detail);

            const confirmationView = document.getElementById('orderConfirmationView');
            if (confirmationView) {
                confirmationView.setAttribute('visible', 'true');
            }

            // Clear the cart
            const cartModal = document.querySelector('cart-modal');
            if (cartModal) {
                cartModal.clearCart(); 
            }
        });

        // Listen for continue shopping to close confirmation
        document.addEventListener('continue-shopping', function(event) {
            const confirmationView = document.getElementById('orderConfirmationView');
            if (confirmationView) {
                confirmationView.removeAttribute('visible');
            }
        });

        // --- PROMO-SPECIFIC LISTENERS ---
        document.addEventListener('gallery-promo-clicked', function(event) {
            const { promoId, title, discount, discountText, expires } = event.detail;
            console.log(`Promotion clicked: ${title} (${promoId}) - ${discount} ${discountText}`);
            
            const detailView = document.getElementById('categoryDetailView');
            detailView.setAttribute('category-id', promoId);
            detailView.setAttribute('title', title);
            detailView.setAttribute('subtitle', `${discount} ${discountText} - Expires: ${expires}`);
            detailView.setAttribute('type', 'promo');
            detailView.setAttribute('visible', 'true');
        });
    </script>

</body>
</html>
